import React, { useState } from 'react'
import { Link, Navigate } from 'react-router-dom'
import axios from 'axios';
import Activeuserpage from './Activeuserpage';
import 'react-toastify/dist/ReactToastify.css';
import { toast } from 'react-toastify';

export default function Login()
 {
 const[userid,setUserid]=useState();
 const[password,setPassword]=useState();
 const [isLoggedIn, setIsLoggedIn] = useState(false);

  function loginactive(e)
  {
    e.preventDefault();
    axios
    .get(`http://localhost:8080/loginactive/${userid}/${password}`)
    .then((res)=>{
      //alert(res.data);
      toast.success(res.data);
      setIsLoggedIn(true); 
    })
    .catch((err) => {
     // alert(err.response.data);
     toast.error(err.response.data);
    });
}

if (isLoggedIn) {
  return <Navigate to="/Activeuserpage" />; 
}


  return (
    <>
    <div>
      <h1>Login Page</h1>
      <div className="mb-3">
      <label>Enter Userid:</label>
      <input type="number" className='form-control' value={userid} onChange={(e)=>setUserid(e.target.value)}/>
      </div>

      <div className="mb-3">
      <label>Enter Password:</label>
      <input type="password" className='form-control' value={password} onChange={(e)=>setPassword(e.target.value)} />
      </div>

      <button type="button" className="btn btn-primary me-2" onClick={loginactive}>Submit</button>
      <Link to="/" className="btn btn-primary">Back</Link>
    </div>
    </>
  )
}
